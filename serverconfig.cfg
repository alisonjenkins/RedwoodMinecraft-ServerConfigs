USER="rwpack164"
SERVER_ROOT="/srv/minecraft/rwpack164"
UPDATE_DIR="/tmp/rwpack164"
WORLD="$SERVER_ROOT/world"
WORLD_HDD="$SERVER_ROOT/world.real"
SIZE=4294967296
#SIZE=0
INIT_RAM=4G
RAM=4G 
JAVA_JRE="/usr/bin/java"
#SERVER_JAR="$SERVER_ROOT/minecraft_server.1.6.4.jar"
SERVER_JAR="$SERVER_ROOT/mcpc-plus-1.6.4-R2.1-forge965-B219.jar"
#SERVER_JAR="$SERVER_ROOT/TickThreading-1.6.4.51.jar"

## Java options ##
## Perf tuning docs ##
# http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Ftprf_tunejvm.html
# http://mfinocchiaro.files.wordpress.com/2008/07/java-virtual-machine-neutral.pdf
# http://java.dzone.com/articles/java-performance-tuning
# http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp
OPTIONS="-server" # Must be the first argument to java (source: http://java.dzone.com/articles/java-performance-tuning)
OPTIONS="$OPTIONS -XX:+DisableExplicitGC"
OPTIONS="$OPTIONS -XX:+OptimizeStringConcat"
OPTIONS="$OPTIONS -XX:+UseBiasedLocking"
OPTIONS="$OPTIONS -XX:+UseFastAccessorMethods"
OPTIONS="$OPTIONS -d64"

## Java remote management ##
#OPTIONS="$OPTIONS -Dcom.sun.management.jmxremote.port=24569"
#OPTIONS="$OPTIONS -Dcom.sun.management.jmxremote.password.file=/srv/minecraft/rwsolit/jmxremote.password"
#OPTIONS="$OPTIONS -Dcom.sun.management.jmxremote.ssl=false"

## YourKit Profiling ##
OPTIONS="$OPTIONS -agentpath:/srv/minecraft/rwpack164/prof/yjp-12.0.3/bin/linux-x86-64/libyjpagent.so"

## Code Compilation ##
OPTIONS="$OPTIONS -XX:CompileThreshold=500" ## Attempting to make the server cache more code

## Caches ##
OPTIONS="$OPTIONS -XX:+UseStringCache"

## Heap Options ##
### Eden space ###
OPTIONS="$OPTIONS -Xmn666M" # Young heap size (apparently 1/3 of the full heap size recommended for heaps greater than 1.5Gb)
OPTIONS="$OPTIONS -XX:SurvivorRatio=4"
OPTIONS="$OPTIONS -XX:MinHeapFreeRatio=35"
OPTIONS="$OPTIONS -XX:MaxHeapFreeRatio=70"


OPTIONS="$OPTIONS -XX:NewSize=512m"
OPTIONS="$OPTIONS -XX:MaxNewSize=512m"
OPTIONS="$OPTIONS -XX:InitiatingHeapOccupancyPercent=50"
OPTIONS="$OPTIONS -XX:MaxPermSize=1024m"

#OPTIONS="$OPTIONS -XX:+PrintGCDetails"
#OPTIONS="$OPTIONS -XX:+PrintTenuringDistribution"
#OPTIONS="$OPTIONS -XX:+PrintGCTimestamps"

## Large Page Support ##
OPTIONS="$OPTIONS -XX:+UseLargePages"
OPTIONS="$OPTIONS -XX:LargePageSizeInBytes=2m"

## Adaptiveness
#OPTIONS="$OPTIONS -XX:+UseAdaptiveSizePolicy" # Incompatible with CMS
OPTIONS="$OPTIONS -XX:+UseAdaptiveGCBoundary" 

## ConcMarkSweepGC Garbage Collection Options ##
OPTIONS="$OPTIONS -XX:+UseConcMarkSweepGC"
OPTIONS="$OPTIONS -XX:+CMSIncrementalMode"
OPTIONS="$OPTIONS -XX:+CMSIncrementalPacing"
OPTIONS="$OPTIONS -XX:+UseCMSCompactAtFullCollection"
OPTIONS="$OPTIONS -XX:+CMSScavengeBeforeRemark"
OPTIONS="$OPTIONS -XX:+CMSConcurrentMTEnabled"
OPTIONS="$OPTIONS -XX:+UseParNewGC"

#OPTIONS="$OPTIONS -XX:+UseG1GC"
#OPTIONS="$OPTIONS -XX:G1HeapRegionSize=10m"
#OPTIONS="$OPTIONS -XX:G1ReservePercent=8"
#OPTIONS="$OPTIONS -XX:ParallelGCThreads=7"
OPTIONS="$OPTIONS -XX:ConcGCThreads=8"
OPTIONS="$OPTIONS -XX:MaxGCPauseMillis=50"
OPTIONS="$OPTIONS -Xnoclassgc" # prevents classes being unloaded when there are no instances of that class (apparently improves perf)

## Network Options ##
OPTIONS="$OPTIONS -Djava.net.preferIPv4Stack=true"
OPTIONS="$OPTIONS -Dsun.net.client.defaultConnectTimeout=10000"

## Random need to investigates below ##
#OPTIONS="$OPTIONS -DJINTEGRA_COINIT_VALUE=0"
#OPTIONS="$OPTIONS -DJINTEGRA_NATIVE_MODE"
#OPTIONS="$OPTIONS -Dsun.io.useCanonCaches=false"
#OPTIONS="$OPTIONS -XX:+TieredCompilation"
#OPTIONS="$OPTIONS -XX:+UnlockExperimentalVMOptions"
#OPTIONS="$OPTIONS -XX:+UseThreadPriorities"
#OPTIONS="$OPTIONS -XX:CompileThreshold=1500"
#OPTIONS="$OPTIONS -XX:MaxTenuringThreshold=15"
#OPTIONS="$OPTIONS -XX:ThreadPriorityPolicy=42"
OPTIONS="$OPTIONS -XX:UseSSE=4"
OPTIONS="$OPTIONS -XX:+AggressiveOpts"
#OPTIONS="$OPTIONS -Xrs"
#OPTIONS="$OPTIONS -Xverify:none"
#OPTIONS="$OPTIONS -XX:+UseAdaptiveGCBoundary" # NEVER USE (Causes memory usage to grow constantly)
